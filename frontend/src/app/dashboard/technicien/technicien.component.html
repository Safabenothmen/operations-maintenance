<div class="container mt-4">
  <h2>Liste des techniciens</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Email</th>
        <th>Compétences</th>
        <th>Disponibilité</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let technicien of techniciens">
        <td>{{ technicien.nom }}</td>
        <td>{{ technicien.email }}</td>
        <td>{{ technicien.competences }}</td>
        <td>{{ technicien.disponibilite ? 'Oui' : 'Non' }}</td>
        <td>
          <button class="btn btn-warning btn-sm" (click)="chargerPourModification(technicien)">Modifier</button>
          <button class="btn btn-danger btn-sm" (click)="supprimerTechnicien(technicien.id!)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>

  <h2 class="mt-5">{{ editMode ? 'Modifier le' : 'Ajouter un' }} technicien</h2>
  <form (ngSubmit)="ajouterOuModifierTechnicien()">
    <div class="mb-3">
      <label>Nom :</label>
      <input type="text" class="form-control" [(ngModel)]="newTechnicien.nom" name="nom" required>
    </div>
    <div class="mb-3">
      <label>Email :</label>
      <input type="email" class="form-control" [(ngModel)]="newTechnicien.email" name="email" required>
    </div>
    <div class="mb-3">
      <label>Mot de passe :</label>
      <input type="password" class="form-control" [(ngModel)]="newTechnicien.motDePasse" name="motDePasse" [required]="!editMode">
    </div>
    <div class="mb-3">
      <label>Compétences :</label>
      <input type="text" class="form-control" [(ngModel)]="newTechnicien.competences" name="competences">
    </div>
    <div class="mb-3">
      <label>Disponibilité :</label>
      <select class="form-control" [(ngModel)]="newTechnicien.disponibilite" name="disponibilite">
        <option [ngValue]="true">Disponible</option>
        <option [ngValue]="false">Indisponible</option>
      </select>
    </div>
    <button type="submit" class="btn btn-success">
      {{ editMode ? 'Mettre à jour' : 'Ajouter' }}
    </button>
    <button type="button" class="btn btn-secondary ms-2" (click)="resetForm()" *ngIf="editMode">Annuler</button>
  </form>
</div>
